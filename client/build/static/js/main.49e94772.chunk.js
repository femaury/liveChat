(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAAH/62qrAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDItMDdUMTE6NDE6NTgrMDE6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMDItMDdUMTE6NDE6NTgrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTAyLTA3VDExOjQxOjU4KzAxOjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmM3YjBhNzU4LTAxOGYtNGZhYS1hYjY4LTNhNDY1NDYzZWQxMCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjA0ZWExMWY3LWExNTUtYTE0MC05YTlhLTQ1YWZmYTAyNThhNCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmY3ZDIwN2NiLTE4NGEtNDI0Yy05YTJhLWFhZWVjMGRiOWY5NiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZjdkMjA3Y2ItMTg0YS00MjRjLTlhMmEtYWFlZWMwZGI5Zjk2IiBzdEV2dDp3aGVuPSIyMDE5LTAyLTA3VDExOjQxOjU4KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YzdiMGE3NTgtMDE4Zi00ZmFhLWFiNjgtM2E0NjU0NjNlZDEwIiBzdEV2dDp3aGVuPSIyMDE5LTAyLTA3VDExOjQxOjU4KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4KRzHZAAARkElEQVR4nO2dzY7dxhGFjxJbUuB3CJBtXiNeSB5JtjQCbOT5AgeJHcuW5J+NXyPbAHkIxzMIoCzudMTpIS+7m1XdVV3nW+nnXrKLh1832eQl77179w4j+c3QtbMBbACAD2q/8Ps//PHs///7X/+sWt69Ug33VtzakKIIalde853dBiwWdAWgZHO9S58racTZBmQrv79YwbmV3/rzXiNKLbif/X2tEU19+mYDspbf21nh2sr//51zW6GmH9hqxNmV71Hb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"},34:function(e,t,n){e.exports=n.p+"static/media/user_logo.49da0b13.png"},37:function(e,t,n){e.exports=n(84)},42:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},79:function(e,t){},82:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),i=n(33),o=n.n(i),c=(n(42),n(1)),r=n(2),l=n(4),u=n(3),m=n(5),h=n(36),g=n(8);n(44);var d=function(e){var t=e.author,n=e.time,s=e.text,i=""===t?"-8px":"0";return a.a.createElement("div",{className:"message",style:{marginTop:i}},a.a.createElement("div",{className:"messageInfo"},a.a.createElement("div",{className:"messageAuthor"},t),a.a.createElement("div",{className:"messageTime"},n)),a.a.createElement("div",{className:"messageText"},function(e){var t=e.split(/\s/);return e=t.map(function(e,n){var s=n<t.length-1?" ":"",i=e.match(/^!\[([a-zA-Z0-9 ]*)\]\((https?:\/\/[^)]*)\)$/);return e.match(/^https?:\//)?a.a.createElement("span",null,a.a.createElement("a",{href:e},e),s):i?a.a.createElement("span",null,a.a.createElement("img",{src:i[2],alt:i[1],style:{height:"12vh"}}),s):e+s})}(s)))},p=function(e){var t,n=new Date,s=("0"+n.getDate()).slice(-2),a=("0"+(n.getMonth()+1)).slice(-2),i=(""+n.getFullYear()).slice(2);e?t=s+"/"+a+"/"+i+" at "+("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2):t=s+"/"+a+"/"+i;return t},A=n(13),v=n.n(A),f=(n(46),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={input:"",isTyping:!1},n.onChange=function(e){var t=e.target.value;n.setState({input:t}),t.length>0&&!1===n.state.isTyping?(n.setState({isTyping:!0}),n.props.updateTyping()):0===t.length&&!0===n.state.isTyping&&(n.setState({isTyping:!1}),n.props.updateTyping())},n.submitInput=function(e){"Enter"===e.key&&n.sendMessage(e)},n.sendMessage=function(e){if(/\S/.test(n.state.input)){e.preventDefault();var t=localStorage.getItem("token"),s=p(!0);n.props.socket.emit("sendMessage",{username:n.props.username,time:s,text:n.state.input,token:t}),n.setState({input:"",isTyping:!1}),n.props.updateTyping()}},n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.mobile?a.a.createElement("button",{className:"disconnectMobile",onClick:this.props.disconnectUser},a.a.createElement("img",{alt:"",src:v.a})):a.a.createElement("button",{className:"chatSend",onClick:this.sendMessage},"Send");return a.a.createElement("div",{className:"chatInputBox"},a.a.createElement("input",{placeholder:"Message...",className:"chatInput",maxLength:"65000",value:this.state.input,onChange:this.onChange,onKeyDown:this.submitInput}),e)}}]),t}(s.Component)),w=function(e){var t=new Date,n=function(e){var t=e.slice(0,3),n=e.slice(3,6),s=e.slice(6);return n.concat(t,s)}(e.substr(0,8)),s=t.getDay(),a=Math.abs(function(e,t){var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),s=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((s-n)/864e5)}(new Date(n),t));switch(a){case 0:return e.substr(12);case 1:return"Yesterday "+e.substr(9);case 2:case 3:case 4:case 5:case 6:return"Last "+["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][((s-a)%7+7)%7]+e.substr(8);default:return e.substr(0,8)}},b=(n(48),"http://localhost:3000"),E=50,y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={input:"",messages:[],limit:E,typing:[]},n.props.socket.on("receiveMessage",function(e){n.setState({messages:[].concat(Object(h.a)(n.state.messages),[e])}),"undefined"!==typeof Notification&&"CO"!==e.username&&e.username!==localStorage.getItem("user")&&new Notification("Soir chat new message",{body:"".concat(e.username,": ").concat(e.text),icon:"https://soir.wtf/favicon.png"})}),n.props.socket.on("updateTyping",function(e){var t=n.state.typing;t.includes(e.username)?t.splice(t.indexOf(e.username),1):t.push(e.username),n.setState({typing:t})}),n.onScroll=function(){if(0===Object(g.a)(Object(g.a)(n)).refs.messageList.scrollTop){var e=n.state.limit+E;if(e>n.state.messages.length+E)return;n.setState({limit:e}),n.fetchHistory(e)}},n.updateTyping=function(){n.props.socket.emit("userTyping")},n.fetchHistory=function(e){fetch("".concat(b,"/chatMessages"),{method:"POST",body:JSON.stringify({limit:e}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){n.setState({messages:e})})},n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchHistory(this.state.limit),this.messagesEnd.scrollIntoView()}},{key:"componentWillUpdate",value:function(e,t){if(this.historyChanged=t.messages.slice(0,E)!==this.state.messages.slice(0,E),this.historyChanged){var n=this.refs.messageList,s=n.scrollTop,a=n.scrollHeight-n.clientHeight;if(this.scrollAtBottom=a<=0||s===a,!this.scrollAtBottom){var i=n.childNodes.length,o=this.state.limit-i;this.topMessage=n.childNodes[o]}}}},{key:"componentDidUpdate",value:function(){this.historyChanged&&(this.scrollAtBottom?this.messagesEnd.scrollIntoView():this.topMessage&&this.topMessage.scrollIntoView())}},{key:"render",value:function(){var e=this,t=this.props.auth?a.a.createElement(f,{socket:this.props.socket,username:this.props.username,updateTyping:this.updateTyping,disconnectUser:this.props.disconnectUser,mobile:this.props.mobile}):a.a.createElement("div",{className:"connectBar",onClick:this.props.toggleModal},"JOIN THE CHAT"),n="";return 1===this.state.typing.length?n=this.state.typing[0]+" is typing...":2===this.state.typing.length?n=this.state.typing[0]+" and "+this.state.typing[1]+" are typing...":this.state.typing.length>2&&(n=this.state.typing.length+" users are typing..."),a.a.createElement("div",{className:"chatContainer"},a.a.createElement("div",{className:"innerChatContainer"},a.a.createElement("div",{className:"chatTextBox",id:"scroll",ref:"messageList",onScroll:this.onScroll},this.state.messages.map(function(t,n){var s=t.username,i=t.time,o=e.state.messages[n-1];if("CO"===s){var c=t.text.includes("joined")?"joined":"left";return a.a.createElement("div",{className:"connectionMsg"},a.a.createElement("div",{className:"connectionTxt",id:c},t.text))}return 0!==n&&s===o.username&&function(e,t){if(e===t)return!0;var n=parseInt(e.substr(15)),s=parseInt(t.substr(15));return e.substr(0,15)===t.substr(0,15)&&s<=n+2&&s>=n-2}(o.time,i)?(s="",i=""):i=w(i),a.a.createElement(d,{author:s,time:i,text:t.text,key:n})}),a.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})),""!==n&&a.a.createElement("div",{className:"userTyping"},n),t))}}]),t}(s.Component);y.scrollAtBottom=!0;var S=y,B=n(34),I=n.n(B),N=(n(50),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"user"},a.a.createElement("img",{src:I.a,className:"userLogo",alt:""}),a.a.createElement("div",{className:"nameHover"},this.props.name))}}]),t}(s.Component)),C=(n(52),"http://localhost:3000"),M=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={login:!0,username:"",password:"",passwordCheck:"",err_user:"",err_pass:"",err_passcheck:""},n.submitLogin=function(e){e.preventDefault(),n.state.username.length<4||n.state.username.length>25?n.setState({err_user:"4 to 25 characters"}):n.state.login||n.state.passwordCheck===n.state.password?fetch("".concat(C,"/chatConnection"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:n.state.login,username:n.state.username,password:n.state.password})}).then(function(e){return e.json()}).then(function(e){e.error?n.setState(e.error):e.success_login?(localStorage.setItem("token",e.token),localStorage.setItem("user",n.state.username),n.props.connectUser()):e.success_signup&&n.setState({login:!0,username:"",password:"",passwordCheck:""})}):n.setState({err_passcheck:"invalid"})},n.handleClick=function(e){null!==n.node&&(n.node.contains(e.target)||n.props.toggleModal())},n.toggleLogin=function(e){n.setState({login:e,username:"",password:"",passwordCheck:""})},n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t=this.state.login,n=this.state.err_user,s=this.state.err_pass,i=this.state.err_passcheck;return a.a.createElement("div",{className:"wrapModal",onClick:function(t){return e.handleClick(t)}},a.a.createElement("div",{className:"connModal",ref:function(t){return e.node=t},style:{height:t?"400px":"525px"}},a.a.createElement("form",{className:"loginForm",onSubmit:this.submitLogin},a.a.createElement("div",{className:"labelWrap"},a.a.createElement("label",{className:"formLabel"},"Username"),n),a.a.createElement("input",{className:"usernameInput",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}}),a.a.createElement("div",{className:"labelWrap"},a.a.createElement("label",{className:"formLabel"},"Password"),s),a.a.createElement("input",{className:"passInput",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),!t&&a.a.createElement("div",{className:"labelWrap"},a.a.createElement("label",{className:"formLabel"},"Verify Password"),i),!t&&a.a.createElement("input",{className:"passCheckInput",type:"password",value:this.state.passwordCheck,onChange:function(t){return e.setState({passwordCheck:t.target.value})}}),a.a.createElement("button",{className:"submitBtn",type:"submit",onClick:this.submitLogin},"Submit")),a.a.createElement("div",{className:"connMenu"},a.a.createElement("div",{className:"connMenuItem",id:"login",style:{backgroundColor:t?"#1F1F1F":"Black"},onClick:function(){return e.toggleLogin(!0)}},"Log In"),a.a.createElement("div",{className:"connMenuItem",id:"signup",style:{backgroundColor:t?"Black":"#1F1F1F"},onClick:function(){return e.toggleLogin(!1)}},"Sign Up"))))}}]),t}(s.Component),P=n(35),D=n.n(P),L=(n(82),"http://localhost:3000"),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={auth:!1,modal:!1,online:[],username:"Anonymous",token:"",width:window.innerWidth},n.socket=D()(L),n.socket.on("updateOnlineUsers",function(e){n.setState({online:e.online})}),n.toggleModal=function(){n.setState({modal:!n.state.modal})},n.connectUser=function(){var e=localStorage.getItem("user"),t=localStorage.getItem("token");e&&t&&(n.setState({auth:!0,modal:!1,token:t,username:e}),n.socket.emit("userConnected",{username:e}))},n.disconnectUser=function(){""!==n.state.token&&(n.socket.emit("userDisconnected",{username:n.state.username}),localStorage.removeItem("token"),localStorage.removeItem("user"),n.setState({auth:!1,modal:!1,username:"Anonymous",token:""}))},n.handleWindowSize=function(){n.setState({width:window.innerWidth})},n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){window.addEventListener("resize",this.handleWindowSize)}},{key:"componentDidMount",value:function(){var e=this;this.connectUser(),"undefined"!==typeof Notification&&Notification.requestPermission(),fetch("".concat(L,"/getOnlineUsers"),{method:"POST",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.setState({online:t.online})})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowSize)}},{key:"render",value:function(){var e=this,t=this.state.width<=500;return a.a.createElement("div",{className:"appContainer"},this.state.modal&&a.a.createElement(M,{toggleModal:this.toggleModal,socket:this.socket,connectUser:this.connectUser}),!t&&a.a.createElement("div",{className:"dummyWidth"}),a.a.createElement(S,{auth:this.state.auth,toggleModal:this.toggleModal,socket:this.socket,username:this.state.username,disconnectUser:this.disconnectUser,mobile:t}),!t&&a.a.createElement("div",{className:"scrollWrapper"},a.a.createElement("div",{className:"userContainer"},this.state.auth&&a.a.createElement("div",{className:"disconnect",onClick:this.disconnectUser},a.a.createElement("img",{src:v.a,alt:"",title:"Disconnect"})),this.state.online.map(function(t){return e.state.username!==t?a.a.createElement(N,{name:t,key:t}):null}))))}}]),t}(s.Component);o.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[37,2,1]]]);
//# sourceMappingURL=main.49e94772.chunk.js.map